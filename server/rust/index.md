# Rust å…¥é—¨

## å®‰è£…Rust

+ å®˜ç½‘ä¸‹è½½ [å…¥é—¨ - Rust ç¨‹åºè®¾è®¡è¯­è¨€ (rust-lang.org)](https://www.rust-lang.org/zh-CN/learn/get-started)
+ æ–‡æ¡£æ‰‹å†Œ[[Rust ç¨‹åºè®¾è®¡è¯­è¨€ - Rust ç¨‹åºè®¾è®¡è¯­è¨€ ç®€ä½“ä¸­æ–‡ç‰ˆ (kaisery.github.io)](https://kaisery.github.io/trpl-zh-cn/title-page.html)]

## Rust å‘½ä»¤ä»‹ç»

æ‚¨åœ¨å®‰è£… Rustup æ—¶ï¼Œä¹Ÿä¼šå®‰è£… Rust æ„å»ºå·¥å…·å’ŒåŒ…ç®¡ç†å™¨çš„æœ€æ–°ç¨³å®šç‰ˆï¼Œå³ Cargoã€‚Cargo å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼š

- `cargo build` å¯ä»¥æ„å»ºé¡¹ç›®
- `cargo run` å¯ä»¥è¿è¡Œé¡¹ç›®
- `cargo test` å¯ä»¥æµ‹è¯•é¡¹ç›®
- `cargo doc` å¯ä»¥ä¸ºé¡¹ç›®æ„å»ºæ–‡æ¡£
- `cargo publish` å¯ä»¥å°†åº“å‘å¸ƒåˆ° [crates.io](https://crates.io/)ã€‚

## åˆ›å»ºé¡¹ç›®

```rust
cargo new hello-rust  // åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›® hell-rust 
```

ç”Ÿæˆçš„hell-rust æ–°ç›®å½•ä¸‹åŒ…å« ä»¥ä¸‹æ–‡ä»¶

- Cargo.toml  ä¸º Rust çš„æ¸…å•æ–‡ä»¶ã€‚å…¶ä¸­åŒ…å«äº†é¡¹ç›®çš„å…ƒæ•°æ®å’Œä¾èµ–åº“ã€‚
- `src/main.rs` ä¸ºç¼–å†™åº”ç”¨ä»£ç çš„åœ°æ–¹ã€‚

## ä¾èµ–ç®¡ç†

åœ¨Cargo.toml  æ–‡ä»¶ä¸­æ·»åŠ éœ€è¦çš„ä¾èµ–

```rust
[dependencies]
ferris-says = "0.2"
```

æ‰§è¡Œ cargo build å‘½ä»¤å°†å®‰è£…ä¾èµ–ï¼Œä¸”ä¼šç”Ÿæˆä¸€ä¸ª`Cargo.lock`ï¼Œè¯¥æ–‡ä»¶è®°å½•äº†æœ¬åœ°æ‰€ç”¨ä¾èµ–åº“çš„ç²¾ç¡®ç‰ˆæœ¬

## å¼€å‘

+ ä½¿ç”¨ä¾èµ–

  ```rust
  use std::io; // é€šè¿‡use å¼•å…¥ä½¿ç”¨ æ­¤å¤„å¼•ç”¨io è¾“å…¥æ ‡å‡†åº“çš„æ–¹æ³•
  use rand::Rng;
  ```

+ ç±»å‹

  Rust æ˜¯ **é™æ€ç±»å‹**ï¼ˆ*statically typed*ï¼‰è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ç¼–è¯‘æ—¶å°±å¿…é¡»çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹ã€‚æ ¹æ®å€¼åŠå…¶ä½¿ç”¨æ–¹å¼ï¼Œç¼–è¯‘å™¨é€šå¸¸å¯ä»¥æ¨æ–­å‡ºæˆ‘ä»¬æƒ³è¦ç”¨çš„ç±»å‹ã€‚

  + æ ‡é‡ç±»å‹ 

    **æ ‡é‡**ï¼ˆ*scalar*ï¼‰ç±»å‹ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„å€¼ã€‚Rust æœ‰å››ç§åŸºæœ¬çš„æ ‡é‡ç±»å‹ï¼šæ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”ç±»å‹å’Œå­—ç¬¦ç±»å‹ã€‚ä½ å¯èƒ½åœ¨å…¶ä»–è¯­è¨€ä¸­è§è¿‡å®ƒä»¬ã€‚è®©æˆ‘ä»¬æ·±å…¥äº†è§£å®ƒä»¬åœ¨ Rust ä¸­æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

    + æ•´å‹ï¼šæ˜¯ä¸€ä¸ªæ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ï¼Œ**æœ‰ç¬¦å·** å’Œ **æ— ç¬¦å·** ä»£è¡¨æ•°å­—èƒ½å¦ä¸ºè´Ÿå€¼

       Rust ä¸­çš„æ•´å‹

      | é•¿åº¦    | æœ‰ç¬¦å·  | æ— ç¬¦å·  |
      | ------- | ------- | ------- |
      | 8-bit   | `i8`    | `u8`    |
      | 16-bit  | `i16`   | `u16`   |
      | 32-bit  | `i32`   | `u32`   |
      | 64-bit  | `i64`   | `u64`   |
      | 128-bit | `i128`  | `u128`  |
      | arch    | `isize` | `usize` |

      æ¯ä¸€ä¸ªæœ‰ç¬¦å·çš„å˜ä½“å¯ä»¥å‚¨å­˜åŒ…å«ä» -(2n - 1) åˆ° 2n - 1 - 1 åœ¨å†…çš„æ•°å­—ï¼Œè¿™é‡Œ *n* æ˜¯å˜ä½“ä½¿ç”¨çš„ä½æ•°ã€‚æ‰€ä»¥ `i8` å¯ä»¥å‚¨å­˜ä» -(27) åˆ° 27 - 1 åœ¨å†…çš„æ•°å­—ï¼Œä¹Ÿå°±æ˜¯ä» -128 åˆ° 127ã€‚æ— ç¬¦å·çš„å˜ä½“å¯ä»¥å‚¨å­˜ä» 0 åˆ° 2n - 1 çš„æ•°å­—ï¼Œæ‰€ä»¥ `u8` å¯ä»¥å‚¨å­˜ä» 0 åˆ° 28 - 1 çš„æ•°å­—ï¼Œä¹Ÿå°±æ˜¯ä» 0 åˆ° 255ã€‚

      å¦å¤–ï¼Œ`isize` å’Œ `usize` ç±»å‹ä¾èµ–è¿è¡Œç¨‹åºçš„è®¡ç®—æœºæ¶æ„ï¼š64 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 64 ä½çš„ï¼Œ32 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 32 ä½çš„ã€‚

      å¯ä»¥ä½¿ç”¨è¡¨æ ¼ 3-2 ä¸­çš„ä»»ä½•ä¸€ç§å½¢å¼ç¼–å†™æ•°å­—å­—é¢å€¼ã€‚è¯·æ³¨æ„å¯ä»¥æ˜¯å¤šç§æ•°å­—ç±»å‹çš„æ•°å­—å­—é¢å€¼å…è®¸ä½¿ç”¨ç±»å‹åç¼€ï¼Œä¾‹å¦‚ `57u8` æ¥æŒ‡å®šç±»å‹ï¼ŒåŒæ—¶ä¹Ÿå…è®¸ä½¿ç”¨ `_` åšä¸ºåˆ†éš”ç¬¦ä»¥æ–¹ä¾¿è¯»æ•°ï¼Œä¾‹å¦‚`1_000`ï¼Œå®ƒçš„å€¼ä¸ä½ æŒ‡å®šçš„ `1000` ç›¸åŒã€‚

      è¡¨æ ¼ 3-2: Rust ä¸­çš„æ•´å‹å­—é¢å€¼

      | æ•°å­—å­—é¢å€¼                    | ä¾‹å­          |
      | ----------------------------- | ------------- |
      | Decimal (åè¿›åˆ¶)              | `98_222`      |
      | Hex (åå…­è¿›åˆ¶)                | `0xff`        |
      | Octal (å…«è¿›åˆ¶)                | `0o77`        |
      | Binary (äºŒè¿›åˆ¶)               | `0b1111_0000` |
      | Byte (å•å­—èŠ‚å­—ç¬¦)(ä»…é™äº`u8`) | `b'A'`        |

      é‚£ä¹ˆè¯¥ä½¿ç”¨å“ªç§ç±»å‹çš„æ•°å­—å‘¢ï¼Ÿå¦‚æœæ‹¿ä¸å®šä¸»æ„ï¼ŒRust çš„é»˜è®¤ç±»å‹é€šå¸¸æ˜¯ä¸ªä¸é”™çš„èµ·ç‚¹ï¼Œæ•°å­—ç±»å‹é»˜è®¤æ˜¯ `i32`ã€‚`isize` æˆ– `usize` ä¸»è¦ä½œä¸ºæŸäº›é›†åˆçš„ç´¢å¼•ã€‚

      > ##### [æ•´å‹æº¢å‡º](https://kaisery.github.io/trpl-zh-cn/ch03-02-data-types.html#æ•´å‹æº¢å‡º)
      >
      > æ¯”æ–¹è¯´æœ‰ä¸€ä¸ª `u8` ï¼Œå®ƒå¯ä»¥å­˜æ”¾ä»é›¶åˆ° `255` çš„å€¼ã€‚é‚£ä¹ˆå½“ä½ å°†å…¶ä¿®æ”¹ä¸º `256` æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿè¿™è¢«ç§°ä¸º â€œæ•´å‹æº¢å‡ºâ€ï¼ˆâ€œinteger overflowâ€ ï¼‰ï¼Œè¿™ä¼šå¯¼è‡´ä»¥ä¸‹ä¸¤ç§è¡Œä¸ºä¹‹ä¸€çš„å‘ç”Ÿã€‚å½“åœ¨ debug æ¨¡å¼ç¼–è¯‘æ—¶ï¼ŒRust æ£€æŸ¥è¿™ç±»é—®é¢˜å¹¶ä½¿ç¨‹åº *panic*ï¼Œè¿™ä¸ªæœ¯è¯­è¢« Rust ç”¨æ¥è¡¨æ˜ç¨‹åºå› é”™è¯¯è€Œé€€å‡ºã€‚ç¬¬ä¹ç«  [â€œ`panic!` ä¸ä¸å¯æ¢å¤çš„é”™è¯¯â€](https://kaisery.github.io/trpl-zh-cn/ch09-01-unrecoverable-errors-with-panic.html) éƒ¨åˆ†ä¼šè¯¦ç»†ä»‹ç» panicã€‚
      >
      > ä½¿ç”¨ `--release` flag åœ¨ release æ¨¡å¼ä¸­æ„å»ºæ—¶ï¼ŒRust **ä¸ä¼š**æ£€æµ‹ä¼šå¯¼è‡´ panic çš„æ•´å‹æº¢å‡ºã€‚ç›¸åå‘ç”Ÿæ•´å‹æº¢å‡ºæ—¶ï¼ŒRust ä¼šè¿›è¡Œä¸€ç§è¢«ç§°ä¸ºäºŒè¿›åˆ¶è¡¥ç  wrappingï¼ˆ*twoâ€™s complement wrapping*ï¼‰çš„æ“ä½œã€‚ç®€è€Œè¨€ä¹‹ï¼Œæ¯”æ­¤ç±»å‹èƒ½å®¹çº³æœ€å¤§å€¼è¿˜å¤§çš„å€¼ä¼šå›ç»•åˆ°æœ€å°å€¼ï¼Œå€¼ `256` å˜æˆ `0`ï¼Œå€¼ `257` å˜æˆ `1`ï¼Œä¾æ­¤ç±»æ¨ã€‚ç¨‹åºä¸ä¼š panicï¼Œä¸è¿‡å˜é‡å¯èƒ½ä¹Ÿä¸ä¼šæ˜¯ä½ æ‰€æœŸæœ›çš„å€¼ã€‚ä¾èµ–æ•´å‹æº¢å‡º wrapping çš„è¡Œä¸ºè¢«è®¤ä¸ºæ˜¯ä¸€ç§é”™è¯¯ã€‚
      >
      > ä¸ºäº†æ˜¾å¼åœ°å¤„ç†æº¢å‡ºçš„å¯èƒ½æ€§ï¼Œå¯ä»¥ä½¿ç”¨è¿™å‡ ç±»æ ‡å‡†åº“æä¾›çš„åŸå§‹æ•°å­—ç±»å‹æ–¹æ³•ï¼š
      >
      > - æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½å¯ä»¥ä½¿ç”¨ `wrapping_*` æ–¹æ³•è¿›è¡Œ wrappingï¼Œå¦‚ `wrapping_add`
      > - å¦‚æœ `checked_*` æ–¹æ³•å‡ºç°æº¢å‡ºï¼Œåˆ™è¿”å› `None`å€¼
      > - ç”¨ `overflowing_*` æ–¹æ³•è¿”å›å€¼å’Œä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å‡ºç°æº¢å‡º
      > - ç”¨ `saturating_*` æ–¹æ³•åœ¨å€¼çš„æœ€å°å€¼æˆ–æœ€å¤§å€¼å¤„è¿›è¡Œé¥±å’Œå¤„ç†

      #### [æµ®ç‚¹å‹](https://kaisery.github.io/trpl-zh-cn/ch03-02-data-types.html#æµ®ç‚¹å‹)

      Rust ä¹Ÿæœ‰ä¸¤ä¸ªåŸç”Ÿçš„ **æµ®ç‚¹æ•°**ï¼ˆ*floating-point numbers*ï¼‰ç±»å‹ï¼Œå®ƒä»¬æ˜¯å¸¦å°æ•°ç‚¹çš„æ•°å­—ã€‚Rust çš„æµ®ç‚¹æ•°ç±»å‹æ˜¯ `f32` å’Œ `f64`ï¼Œåˆ†åˆ«å  32 ä½å’Œ 64 ä½ã€‚é»˜è®¤ç±»å‹æ˜¯ `f64`ï¼Œå› ä¸ºåœ¨ç°ä»£ CPU ä¸­ï¼Œå®ƒä¸ `f32` é€Ÿåº¦å‡ ä¹ä¸€æ ·ï¼Œä¸è¿‡ç²¾åº¦æ›´é«˜ã€‚æ‰€æœ‰çš„æµ®ç‚¹å‹éƒ½æ˜¯æœ‰ç¬¦å·çš„ã€‚

      è¿™æ˜¯ä¸€ä¸ªå±•ç¤ºæµ®ç‚¹æ•°çš„å®ä¾‹ï¼š

      æ–‡ä»¶åï¼šsrc/main.rs

      ```rust
      fn main() {
          let x = 2.0; // f64
      
          let y: f32 = 3.0; // f32
      }
      ```

      æµ®ç‚¹æ•°é‡‡ç”¨ IEEE-754 æ ‡å‡†è¡¨ç¤ºã€‚`f32` æ˜¯å•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œ`f64` æ˜¯åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚

      #### [æ•°å€¼è¿ç®—](https://kaisery.github.io/trpl-zh-cn/ch03-02-data-types.html#æ•°å€¼è¿ç®—)

      Rust ä¸­çš„æ‰€æœ‰æ•°å­—ç±»å‹éƒ½æ”¯æŒåŸºæœ¬æ•°å­¦è¿ç®—ï¼šåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•å’Œå–ä½™ã€‚æ•´æ•°é™¤æ³•ä¼šå‘é›¶èˆå…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ã€‚ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•åœ¨ `let` è¯­å¥ä¸­ä½¿ç”¨å®ƒä»¬ï¼š

      æ–‡ä»¶åï¼šsrc/main.rs

      ```rust
      fn main() {
          // addition
          let sum = 5 + 10;
      
          // subtraction
          let difference = 95.5 - 4.3;
      
          // multiplication
          let product = 4 * 30;
      
          // division
          let quotient = 56.7 / 32.2;
          let truncated = -5 / 3; // ç»“æœä¸º -1
      
          // remainder
          let remainder = 43 % 5;
      }
      ```

      è¿™äº›è¯­å¥ä¸­çš„æ¯ä¸ªè¡¨è¾¾å¼ä½¿ç”¨äº†ä¸€ä¸ªæ•°å­¦è¿ç®—ç¬¦å¹¶è®¡ç®—å‡ºäº†ä¸€ä¸ªå€¼ï¼Œç„¶åç»‘å®šç»™ä¸€ä¸ªå˜é‡ã€‚[é™„å½• B](https://kaisery.github.io/trpl-zh-cn/appendix-02-operators.html) åŒ…å« Rust æä¾›çš„æ‰€æœ‰è¿ç®—ç¬¦çš„åˆ—è¡¨ã€‚

      #### [å¸ƒå°”å‹](https://kaisery.github.io/trpl-zh-cn/ch03-02-data-types.html#å¸ƒå°”å‹)

      æ­£å¦‚å…¶ä»–å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼ŒRust ä¸­çš„å¸ƒå°”ç±»å‹æœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼š`true` å’Œ `false`ã€‚Rust ä¸­çš„å¸ƒå°”ç±»å‹ä½¿ç”¨ `bool` è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼š

      æ–‡ä»¶åï¼šsrc/main.rs

      ```rust
      fn main() {
          let t = true;
      
          let f: bool = false; // with explicit type annotation
      }
      ```

      ä½¿ç”¨å¸ƒå°”å€¼çš„ä¸»è¦åœºæ™¯æ˜¯æ¡ä»¶è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ `if` è¡¨è¾¾å¼ã€‚åœ¨ [â€œæ§åˆ¶æµâ€ï¼ˆâ€œControl Flowâ€ï¼‰](https://kaisery.github.io/trpl-zh-cn/ch03-05-control-flow.html#æ§åˆ¶æµ) éƒ¨åˆ†å°†ä»‹ç» `if` è¡¨è¾¾å¼åœ¨ Rust ä¸­å¦‚ä½•å·¥ä½œã€‚

      #### [å­—ç¬¦ç±»å‹](https://kaisery.github.io/trpl-zh-cn/ch03-02-data-types.html#å­—ç¬¦ç±»å‹)

      Rust çš„ `char` ç±»å‹æ˜¯è¯­è¨€ä¸­æœ€åŸç”Ÿçš„å­—æ¯ç±»å‹ã€‚ä¸‹é¢æ˜¯ä¸€äº›å£°æ˜ `char` å€¼çš„ä¾‹å­ï¼š

      æ–‡ä»¶åï¼šsrc/main.rs

      ```rust
      fn main() {
          let c = 'z';
          let z: char = 'â„¤'; // with explicit type annotation
          let heart_eyed_cat = 'ğŸ˜»';
      }
      ```

      æ³¨æ„ï¼Œæˆ‘ä»¬ç”¨å•å¼•å·å£°æ˜ `char` å­—é¢é‡ï¼Œè€Œä¸ä¹‹ç›¸åçš„æ˜¯ï¼Œä½¿ç”¨åŒå¼•å·å£°æ˜å­—ç¬¦ä¸²å­—é¢é‡ã€‚Rust çš„ `char` ç±»å‹çš„å¤§å°ä¸ºå››ä¸ªå­—èŠ‚ (four bytes)ï¼Œå¹¶ä»£è¡¨äº†ä¸€ä¸ª Unicode æ ‡é‡å€¼ï¼ˆUnicode Scalar Valueï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥æ¯” ASCII è¡¨ç¤ºæ›´å¤šå†…å®¹ã€‚åœ¨ Rust ä¸­ï¼Œå¸¦å˜éŸ³ç¬¦å·çš„å­—æ¯ï¼ˆAccented lettersï¼‰ï¼Œä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰å­—ç¬¦ï¼Œemojiï¼ˆç»˜æ–‡å­—ï¼‰ä»¥åŠé›¶é•¿åº¦çš„ç©ºç™½å­—ç¬¦éƒ½æ˜¯æœ‰æ•ˆçš„ `char` å€¼ã€‚Unicode æ ‡é‡å€¼åŒ…å«ä» `U+0000` åˆ° `U+D7FF` å’Œ `U+E000` åˆ° `U+10FFFF` åœ¨å†…çš„å€¼ã€‚ä¸è¿‡ï¼Œâ€œå­—ç¬¦â€ å¹¶ä¸æ˜¯ä¸€ä¸ª Unicode ä¸­çš„æ¦‚å¿µï¼Œæ‰€ä»¥äººç›´è§‰ä¸Šçš„ â€œå­—ç¬¦â€ å¯èƒ½ä¸ Rust ä¸­çš„ `char` å¹¶ä¸ç¬¦åˆã€‚

      

     + å¤åˆç±»å‹

       **å¤åˆç±»å‹**ï¼ˆ*Compound types*ï¼‰å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹ã€‚Rust æœ‰ä¸¤ä¸ªåŸç”Ÿçš„å¤åˆç±»å‹ï¼šå…ƒç»„ï¼ˆtupleï¼‰å’Œæ•°ç»„ï¼ˆarrayï¼‰

       + å…ƒç¥–ç±»å‹

         å…ƒç»„æ˜¯ä¸€ä¸ªå°†å¤šä¸ªå…¶ä»–ç±»å‹çš„å€¼ç»„åˆè¿›ä¸€ä¸ªå¤åˆç±»å‹çš„ä¸»è¦æ–¹å¼ã€‚å…ƒç»„é•¿åº¦å›ºå®šï¼šä¸€æ—¦å£°æ˜ï¼Œå…¶é•¿åº¦ä¸ä¼šå¢å¤§æˆ–ç¼©å°ï¼Œ ç”¨æ‹¬å·åŒ…å«ï¼Œé€—å·éš”å¼€

         ```rust
         
             let tup = (500, 6.4, 1);
             let (x, y, z) = tup; // è§£æ„
          	let x: (i32, f64, u8) = (500, 6.4, 1);
             println("{x.0}"); // 500 ä½¿ç”¨.ç´¢å¼•è®¿é—®
         
         ```

       + æ•°ç»„ç±»å‹

         æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ çš„ç±»å‹å¿…é¡»ç›¸åŒã€‚Rust ä¸­çš„æ•°ç»„ä¸ä¸€äº›å…¶ä»–è¯­è¨€ä¸­çš„æ•°ç»„ä¸åŒï¼ŒRust ä¸­çš„æ•°ç»„é•¿åº¦æ˜¯å›ºå®šçš„

         ```rust
         let a = [1,2,3] // é•¿åº¦å›ºå®šçš„ä¸€ä¸ªæ•´å‹æ•°ç»„
         let a: [i32; 5] = [1, 2, 3, 4, 5]; // i32 æ˜¯æ¯ä¸ªå…ƒç´ çš„ç±»å‹ã€‚åˆ†å·ä¹‹åï¼Œæ•°å­— 5 è¡¨æ˜è¯¥æ•°ç»„åŒ…å«äº”ä¸ªå…ƒç´ 
         let a = [3; 5];  //å˜é‡åä¸º a çš„æ•°ç»„å°†åŒ…å« 5 ä¸ªå…ƒç´ ï¼Œè¿™äº›å…ƒç´ çš„å€¼æœ€åˆéƒ½å°†è¢«è®¾ç½®ä¸º 3ã€‚è¿™ç§å†™æ³•ä¸ let a = [3, 3, 3, 3, 3];
         
         println("{a[1]}")
         ```

         vector ç±»å‹æ˜¯æ ‡å‡†åº“æä¾›çš„ä¸€ä¸ª **å…è®¸** å¢é•¿å’Œç¼©å°é•¿åº¦çš„ç±»ä¼¼æ•°ç»„çš„é›†åˆç±»å‹

         

+ å‡½æ•°

  Rust ä»£ç ä¸­çš„å‡½æ•°å’Œå˜é‡åä½¿ç”¨ *snake case* è§„èŒƒé£æ ¼ã€‚åœ¨ snake case ä¸­ï¼Œæ‰€æœ‰å­—æ¯éƒ½æ˜¯å°å†™å¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯

  å‡½æ•°ä½¿ç”¨ fn å®šä¹‰

  åœ¨å‡½æ•°ç­¾åä¸­ï¼Œ**å¿…é¡»** å£°æ˜æ¯ä¸ªå‚æ•°çš„ç±»å‹ã€‚

  ```rust
  fn test(value:i32){
      println("hello world! {value}")
  }
  fn five() -> i32 {   // å…·æœ‰è¿”å›å€¼ å¯ä½¿ç”¨return æå‰è¿”å›ï¼Œé»˜è®¤è¿”å›æœ€åçš„è¡¨è¾¾å¼
      5
  }
  
  fn main() {
      let x = five();
      println!("The value of x is: {x}");
  }
  ```

  

+ æ§åˆ¶

  Rust å¹¶ä¸ä¼šå°è¯•è‡ªåŠ¨åœ°å°†éå¸ƒå°”å€¼è½¬æ¢ä¸ºå¸ƒå°”å€¼ã€‚ 

  ```rust
  fn main() {
      let number = 6;
  
      if number % 4 == 0 {
          println!("number is divisible by 4");
      } else if number % 3 == 0 {
          println!("number is divisible by 3");
      } else if number % 2 == 0 {
          println!("number is divisible by 2");
      } else {
          println!("number is not divisible by 4, 3, or 2");
      }
  }
  
  ```

  

+ éå†

  ```rust
  fn main(){
  // loop å…³é”®å­—å‘Šè¯‰ Rust ä¸€éåˆä¸€éåœ°æ‰§è¡Œä¸€æ®µä»£ç ç›´åˆ°ä½ æ˜ç¡®è¦æ±‚åœæ­¢ã€‚
     let mut a = 0;
     loop {
        println("123"); 
        a +=1;
        if a>10 {
            break;
         }
      }
   
   // while å¾ªç¯ä½“
   while a < 10 {
   	  println("123"); 
        a +=1;  
   }
      
   // for å¾ªç¯ä½“
   let a = [10, 20, 30, 40, 50];
   for element in a {
      println!("the value is: {element}");
   }
  for number in (1..4).rev() {  // rev åè½¬range
  	println!("{number}!");
  }
  }
  ```

  

+ å˜é‡

  åœ¨ Rust ä¸­ï¼Œå˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼Œéœ€è¦æ˜¾ç¤ºå£°æ˜å¯å˜

  ```rust
  let foo=5; //ä¸å¯å˜ å˜é‡
  let mut bananas = 5; // å¯å˜ å˜é‡
  let mut guess = String::new(); //åˆ›å»ºäº†ä¸€ä¸ªå¯å˜å˜é‡ï¼Œç»‘å®šåˆ°ä¸€ä¸ªæ–°çš„ String ç©ºå®ä¾‹ä¸Š
  ```

  `::` è¯­æ³•è¡¨æ˜ `new` æ˜¯ `String` ç±»å‹çš„ä¸€ä¸ª **å…³è”å‡½æ•°**ï¼ˆ*associated function*ï¼‰ã€‚å…³è”å‡½æ•°æ˜¯é’ˆå¯¹ç±»å‹å®ç°çš„ï¼Œä¸€äº›è¯­è¨€ä¸­æŠŠå®ƒç§°ä¸º **é™æ€æ–¹æ³•**ï¼ˆ*static method*ï¼‰ã€‚

  + å¸¸é‡ const 

    ä¸å¯æ”¹å˜çš„å€¼ï¼Œä¸”å¿…é¡»å£°æ˜å€¼çš„ç±»å‹

    ```rust
    const Num: u32 = 60 * 60 * 3;
    ```

  + `mut` ä¸éšè—çš„å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå½“å†æ¬¡ä½¿ç”¨ `let` æ—¶ï¼Œå®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜å€¼çš„ç±»å‹ï¼Œå¹¶ä¸”å¤ç”¨è¿™ä¸ªåå­—ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ç¨‹åºè¯·æ±‚ç”¨æˆ·è¾“å…¥ç©ºæ ¼å­—ç¬¦æ¥è¯´æ˜å¸Œæœ›åœ¨æ–‡æœ¬ä¹‹é—´æ˜¾ç¤ºå¤šå°‘ä¸ªç©ºæ ¼ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æƒ³å°†è¾“å…¥å­˜å‚¨æˆæ•°å­—ï¼ˆå¤šå°‘ä¸ªç©ºæ ¼ï¼‰ï¼š

    ```rust
        let spaces = 1;  //1
        let spaces = 5   //5
        
        let mut space = 10
        space=20  //20
    ```

+ å¼•ç”¨ä¸å¤åˆ¶

  ```rust
  let s1 = String::from("hello") //å®šä¹‰äº†ä¸€ä¸ªå­—ç¬¦ä¸² æ ˆä¸­å­˜æ”¾äº†åœ°å€ é•¿åº¦ å †ä¸­å­˜æ”¾å†…å®¹
  let s2 =s1  // åˆ›å»ºä¸€ä¸ªæ–°å˜é‡ æŒ‡å‘s1çš„å†…å®¹ ï¼Œä¸ä¼šå¤åˆ¶ä¸€ä»½ï¼Œç›¸å½“äºæµ…æ‹·è´
  let s3 = s2.clone(); // æ·±æ‹·è´å¯ç”¨clone 
  println("{s1}{s2}") // error  s1 å°†è¢«æ¸…é™¤ï¼Œæ­¤ä¸ºæ— æ•ˆå¼•ç”¨ï¼Œ
  
  
  fn main() {
      let s = String::from("hello");  // s è¿›å…¥ä½œç”¨åŸŸ
  
      takes_ownership(s);             // s çš„å€¼ç§»åŠ¨åˆ°å‡½æ•°é‡Œ ...
                                      // ... æ‰€ä»¥åˆ°è¿™é‡Œä¸å†æœ‰æ•ˆ
  
      let x = 5;                      // x è¿›å…¥ä½œç”¨åŸŸ
  
      makes_copy(x);                  // x åº”è¯¥ç§»åŠ¨å‡½æ•°é‡Œï¼Œ
                                      // ä½† i32 æ˜¯ Copy çš„ï¼Œ
                                      // æ‰€ä»¥åœ¨åé¢å¯ç»§ç»­ä½¿ç”¨ x
  
  } // è¿™é‡Œï¼Œx å…ˆç§»å‡ºäº†ä½œç”¨åŸŸï¼Œç„¶åæ˜¯ sã€‚ä½†å› ä¸º s çš„å€¼å·²è¢«ç§»èµ°ï¼Œ
    // æ²¡æœ‰ç‰¹æ®Šä¹‹å¤„
  
  fn takes_ownership(some_string: String) { // some_string è¿›å…¥ä½œç”¨åŸŸ
      println!("{}", some_string);
  } // è¿™é‡Œï¼Œsome_string ç§»å‡ºä½œç”¨åŸŸå¹¶è°ƒç”¨ `drop` æ–¹æ³•ã€‚
    // å ç”¨çš„å†…å­˜è¢«é‡Šæ”¾
  
  fn makes_copy(some_integer: i32) { // some_integer è¿›å…¥ä½œç”¨åŸŸ
      println!("{}", some_integer);
  } // è¿™é‡Œï¼Œsome_integer ç§»å‡ºä½œç”¨åŸŸã€‚æ²¡æœ‰ç‰¹æ®Šä¹‹å¤„
  
  
  // å¼•ç”¨
  fn main() {
      let s1 = String::from("hello");
  
      let len = calculate_length(&s1);  // è¿™é‡Œä½¿ç”¨ &  ä½¿ç”¨å€¼ä½†ä¸è·å–æ‰€æœ‰æƒ å› æ­¤s1 ä¸å—å½±å“,å¼•ç”¨ï¼ˆé»˜è®¤ï¼‰ä¸å…è®¸ä¿®æ”¹å¼•ç”¨çš„å€¼ã€‚
  	let len = change(&mut s1); // å¯å˜å¼•ç”¨è®¸ä¿®æ”¹å¼•ç”¨çš„å€¼
      println!("The length of '{}' is {}.", s1, len); // æ­£å¸¸æ‰“å° hello
  }
  
  fn calculate_length(s: &String) -> usize {
      s.len()
  }
  fn change(some_string: &mut String) {
      some_string.push_str(", world");
  }
  
  ```
  
  Rust æœ‰ä¸€ä¸ªå«åš `Copy` trait çš„ç‰¹æ®Šæ³¨è§£ï¼Œå¯ä»¥ç”¨åœ¨ç±»ä¼¼æ•´å‹è¿™æ ·çš„å­˜å‚¨åœ¨æ ˆä¸Šçš„ç±»å‹ä¸Šï¼ˆ[ç¬¬åç« ](https://kaisery.github.io/trpl-zh-cn/ch10-00-generics.html)å°†ä¼šè¯¦ç»†è®²è§£ traitï¼‰ã€‚å¦‚æœä¸€ä¸ªç±»å‹å®ç°äº† `Copy` traitï¼Œé‚£ä¹ˆä¸€ä¸ªæ—§çš„å˜é‡åœ¨å°†å…¶èµ‹å€¼ç»™å…¶ä»–å˜é‡åä»ç„¶å¯ç”¨ã€‚
  
  - æ‰€æœ‰æ•´æ•°ç±»å‹ï¼Œæ¯”å¦‚ `u32`ã€‚
  - å¸ƒå°”ç±»å‹ï¼Œ`bool`ï¼Œå®ƒçš„å€¼æ˜¯ `true` å’Œ `false`ã€‚
  - æ‰€æœ‰æµ®ç‚¹æ•°ç±»å‹ï¼Œæ¯”å¦‚ `f64`ã€‚
  - å­—ç¬¦ç±»å‹ï¼Œ`char`ã€‚
  - å…ƒç»„ï¼Œå½“ä¸”ä»…å½“å…¶åŒ…å«çš„ç±»å‹ä¹Ÿéƒ½å®ç° `Copy` çš„æ—¶å€™ã€‚æ¯”å¦‚ï¼Œ`(i32, i32)` å®ç°äº† `Copy`ï¼Œä½† `(i32, String)` å°±æ²¡æœ‰ã€‚
  
  å˜é‡çš„æ‰€æœ‰æƒæ€»æ˜¯éµå¾ªç›¸åŒçš„æ¨¡å¼ï¼šå°†å€¼èµ‹ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ç§»åŠ¨å®ƒã€‚å½“æŒæœ‰å †ä¸­æ•°æ®å€¼çš„å˜é‡ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå…¶å€¼å°†é€šè¿‡ `drop` è¢«æ¸…ç†æ‰ï¼Œé™¤éæ•°æ®è¢«ç§»åŠ¨ä¸ºå¦ä¸€ä¸ªå˜é‡æ‰€æœ‰ã€‚
  
  ### [å¼•ç”¨çš„è§„åˆ™](https://kaisery.github.io/trpl-zh-cn/ch04-02-references-and-borrowing.html#å¼•ç”¨çš„è§„åˆ™)
  
  - åœ¨ä»»æ„ç»™å®šæ—¶é—´ï¼Œ**è¦ä¹ˆ** åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œ**è¦ä¹ˆ** åªèƒ½æœ‰å¤šä¸ªä¸å¯å˜å¼•ç”¨ã€‚
  - å¼•ç”¨å¿…é¡»æ€»æ˜¯æœ‰æ•ˆçš„ã€‚
  
+ è¾“å‡º

  å˜é‡å°†ä¼šæ›¿æ¢å­—ç¬¦ä¸²å¤§æ‹¬å·ä¸­å¯¹åº”çš„ä½ç½®

  ```rust
  let guess=10   
  println!("You guessed: {guess}"); // You guessed: 10
  println!("You guessed: {}",guess); // ç»“æœåŒä¸Šé¢ä¸€è‡´
  println!("x = {guess} and guessed + 2 = {}", guessed + 2);//x=10 and guessed+2=12
  ```

  
